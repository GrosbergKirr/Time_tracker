# Server
## REST-server Time-Tracker

### Usage
1. local: ``` git clone https://github.com/GrosbergKirr/Time_tracker ``` ``` go run main.go```
2. docker: ``` go build -o ./bin/main main.go```    ``` docker-compose up```
### Коротко о сервисе: Сервис способен создавать в БД новых пользователей, менять их данные, создавать для них задачи, помечать время выполнения. БД создается путем миграции при старте сервиса. (Таймаут на походы в базу: 3 сек)
### Сервис имеет методы:

#### 1. Создание пользователя. Передаются паспортные данные, сервис идет на стороннее API за подробной информацией. Паспортные данные валидируются согласно паспорту РФ

```
/create_user
```
Пример запроса
```json
{
  "passportNumber" : "1234 123456"
}

```
#### 2. Изменение данных пользователя. Поиск пользователя происходит по id. При отсутствии выдает ошибку.

```
/update_user
```
Пример запроса

```json
{
  "id": 5,
  "name": "Ivan",
  "surname": "Ivanov",
  "patronymic": "Ivanovich",
  "address": "dom",
  "passportNumber": "1234 123456"
}
```

#### 3. Удаление пользователя. Поиск пользователя происходит по id. При отсутствии выдает ошибку.

```
/delete_user
```
Пример запроса

```json
{
  "id": 5
}
```
#### 4. Получение всех пользователей с фильтрацией по всем полям и пагинацией.

```
/get_user_info?page=2&per_page=2
```
Пример запроса

```json
{
  "name": "Ivan",
  "surname": "Ivanov",
  "patronymic": "Ivanovich"
}
```

#### 5. Создание задачи для пользователя. создает временную метку начала задачи в таблице.
```
/make_task
```
Пример запроса

```json
{
  "name": "Go shopping",
  "user_id" : 5
}
```

#### 6. Установка времени окончания задачи пользователя.
```
/stop_task
```
Пример запроса

```json
{
  "id": 100
}
```
#### 7. Получение всех задач пользователя с сортировкой от самой короткой к самой длинной.
```
/get_user_tasks
```
Пример запроса

```json
{
  "id": 5
}
```
